apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: production
resources:
  - ../base
patchesStrategicMerge: []
patchesJson6902:
  - target:
      group: ""
      version: v1beta1
      labelSelector: "target-namespace=confluent"
      name: .*
    patch: |-
      - op: replace                 # patch KafkaTopic namespace to confluent - it MUST be there, and kustomize overrides it to namespace: above
        path: /metadata/namespace
        value: confluent
images:
  - name: keyholesoftware/kafka-consumer
    newName: keyholesoftware/kafka-consumer # {"$imagepolicy": "production:kafka-consumer:name"}
    newTag: 62dae48e-1658438810 # {"$imagepolicy": "production:kafka-consumer:tag"}
  - name: keyholesoftware/now-playing-api
    newName: keyholesoftware/now-playing-api # {"$imagepolicy": "production:now-playing-api:name"}
    newTag: c2e72188-1658954597 # {"$imagepolicy": "production:now-playing-api:tag"}
